{% extends 'base.html.twig' %}

{% block title %}Connexion - Mappix{% endblock %}

{% block stylesheets %}
{{ parent() }}
{# Inclusion du CSS personnalisé avec AssetMapper #}
<link rel="stylesheet" href="{{ asset('styles/app.css') }}">
{% endblock %}

{% block body %}

<div class="login-page d-flex align-items-center justify-content-center">

    <form method="post" class="login-form">

        <div class="text-center mb-5">
            <img src="{{ asset('images/logo1.png') }}" alt="Mappix" width="140">
            <h1 class="h4 text-white mt-4">Connexion</h1>
        </div>

        {% if error %}
        <div class="alert alert-danger">
            {{ error.messageKey|trans(error.messageData, 'security') }}
        </div>
        {% endif %}

        {% if app.user %}
        <div class="alert alert-info">
            Connecté en tant que {{ app.user.userIdentifier }},
            <br>
            <a href="{{ logout_path() }}">Se déconnecter</a>
        </div>
        {% endif %}

        <div class="form-floating mb-3">
            <input type="email" value="{{ last_username }}" name="_username" id="floatingInput"
                class="form-control bg-dark text-white border-secondary" placeholder="name@example.com"
                autocomplete="email" required autofocus style="height: 70px;">
            <label for="floatingInput" class="text-secondary">Adresse email</label>
        </div>

        <div class="form-floating mb-4">
            <input type="password" name="_password" id="floatingPassword"
                class="form-control bg-dark text-white border-secondary" placeholder="Password"
                required style="height: 70px;">
            <label for="floatingPassword" class="text-secondary">Mot de passe</label>
        </div>

        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

        <div class="form-check text-start mb-4">
            <input class="form-check-input bg-dark border-secondary" type="checkbox" name="_remember_me"
                id="remember_me">
            <label class="form-check-label text-secondary" for="remember_me">
                Se souvenir de moi
            </label>
        </div>

        <button class="btn btn-light w-100 py-2 fw-semibold" type="submit">
            Se connecter
        </button>

        <p class="mt-5 text-center text-secondary small">
            © {{ "now"|date("Y") }} Mappix
        </p>

    </form>

</div>

{% endblock %}